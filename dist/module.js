/*! For license information please see module.js.LICENSE.txt */
define(["emotion","react","@grafana/data","@grafana/ui","@grafana/runtime"],(function(e,t,n,r,a){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=5)}([function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t){e.exports=n},function(e,t){e.exports=r},function(e,t){e.exports=a},function(e,t,n){"use strict";n.r(t);var r=n(2);function a(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function u(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}c((r=r.apply(e,t||[])).next())}))}function i(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}function o(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var u,c,l,s=n(1),f=n.n(s),p=n(0),g=n(3),d=n(4),b=Object(g.stylesFactory)((function(){return{wrapper:Object(p.css)(c||(c=o(["\n      position: relative;\n    "],["\n      position: relative;\n    "]))),img:Object(p.css)(l||(l=o(["\n      position: absolute;\n      top: 0;\n      left: 0;\n    "],["\n      position: absolute;\n      top: 0;\n      left: 0;\n    "])))}})),m=function(e,t,n){d.SystemJS.load("app/core/app_events").then((function(r){r.on("graph-click",(function(r){return a(void 0,void 0,void 0,(function(){var a,o,u;return i(this,(function(i){switch(i.label){case 0:return r.item?(t.current.src="public/plugins/fzj-grafana-timestamp-image/img/progress.svg",a=new Date(r.item.datapoint[0]).toJSON(),o=""+e+a.replace(/:/g,"-")+"."+n,[4,fetch(o)]):[3,3];case 1:return[4,i.sent().blob()];case 2:(u=i.sent()).type&&u.type.includes("image")?t.current.src=URL.createObjectURL(u):t.current.src="public/plugins/fzj-grafana-timestamp-image/img/image-not-found.svg",i.label=3;case 3:return[2]}}))}))}))}))};n.d(t,"plugin",(function(){return h}));var h=new r.PanelPlugin((function(e){var t,n,r,a=e.options,i=(e.data,e.width),c=e.height,l=b();return t=a.imageUrl,n=a.imageExtension,r=Object(s.useRef)(null),m(t,r,n),f.a.createElement("div",{className:Object(p.cx)(l.wrapper,Object(p.css)(u||(u=o(["\n          width: ","px;\n          height: ","px;\n        "],["\n          width: ","px;\n          height: ","px;\n        "])),i,c))},f.a.createElement("img",{ref:r,src:"public/plugins/fzj-grafana-timestamp-image/img/click-graph.svg",alt:"Placeholder",width:i,height:c}))})).setPanelOptions((function(e){return e.addTextInput({path:"imageUrl",name:"Image Url",description:"URL to a folder (e.g. https://server:host/path/) containing images that follow the naming scheme [yyyy]-[mm]-[dd]T[HH]-[MM]-[SS].000Z.[extension]",defaultValue:void 0}).addSelect({path:"imageExtension",defaultValue:"jpg",name:"Image File Extension",settings:{options:[{value:"gif",label:"GIF"},{value:"jpg",label:"JPEG"},{value:"png",label:"PNG"},{value:"svg",label:"SVG"}]}})}))}])}));
//# sourceMappingURL=module.js.map